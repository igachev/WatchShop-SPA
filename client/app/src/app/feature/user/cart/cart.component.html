<app-spinner-bootstrap ></app-spinner-bootstrap>
<div class="container-fluid">
    <div *ngIf="cartItems.length > 0" class="row main-row d-flex justify-content-center align-items-center" >

      <app-toast></app-toast>

      <div class="text-light buy-info">
        <h3>When you purchase a product, our customer center will contact you to confirm the order and provide you with delivery information</h3>
      </div>

        <div  *ngFor="let item of cartItems" class="card mb-3 text-light" style="max-width: 540px;">
            <div class="row g-0">
              <div class="col-md-4">
                <img [src]="item.image" class="img-fluid rounded-start" alt="...">
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title">Brand: {{item.brand}}</h5>
                  <p class="card-text">Model: {{item.model}}</p>
                  <p class="card-text">Battery: {{item.battery}}</p>
                  <p class="card-text">Mechanism: {{item.mechanism}}</p>
                  <p class="card-text">Price: {{item.price  | currency: 'EUR'}}</p>
                  <p class="card-text">Strap: {{item.strap}}</p>
                  <p class="card-text">Glass: {{item.glass}}</p>
                  <p class="card-text">Water Resistance: {{item.waterResistance}}</p>

                  <form method="post" #myForm="ngForm" (ngSubmit)="buy(myForm,item._id || '',item.price)">
                    <div class="mb-3 row">
                     <label for="name" class="col-sm-3 col-form-label">Name</label>
                     <div class="col-md-9 col-sm-8">
                         <input
                         ngModel 
                         type="text" 
                         class="form-control " 
                         name="name" 
                         id="name"
                         #name="ngModel" 
                         required
                         >
             
                       <small *ngIf="
                       name.errors &&
                       name.errors['required'] &&
                       name.touched">
                       Name is required
                     </small>
             
             
                     </div>
                    </div>
             
                    <div class="mb-3 row">
                     <label for="phone" class="col-sm-3 col-form-label">Phone</label>
                     <div class="col-md-9 col-sm-8">
                       <input
                       ngModel
                       type="text" 
                       class="form-control" 
                       name="phone" 
                       id="phone"
                       #phone="ngModel"
                       required>
             
                       <small *ngIf="
                       phone.errors &&
                       phone.errors['required'] &&
                       phone.touched
                       ">
                       Phone is required
                       </small>
             
                     </div>
                   </div>

                   <div class="mb-3 row">
                    <label for="address" class="col-sm-3 col-form-label">Address</label>
                    <div class="col-md-9 col-sm-8">
                      <input
                      ngModel
                      type="text" 
                      class="form-control" 
                      name="address" 
                      id="address"
                      #address="ngModel"
                      required>
            
                      <small *ngIf="
                      address.errors &&
                      address.errors['required'] &&
                      address.touched
                      ">
                      Address is required
                      </small>
            
                    </div>
                  </div>

                  <div class="mb-3 row">
                    <label for="quantity" class="col-sm-3 col-form-label">Quantity</label>
                    <div class="col-md-9 col-sm-8">
                      <input
                      ngModel
                      type="number" 
                      class="form-control" 
                      name="quantity" 
                      id="quantity"
                      #quantity="ngModel"
                      min="1"
                      required>
            
                      <small *ngIf="
                      quantity.errors &&
                      quantity.errors['required'] &&
                      quantity.touched
                      ">
                      Quantity is required
                      </small>

                      <small *ngIf="
                      quantity.errors &&
                      quantity.errors['min'] &&
                      quantity.touched
                      ">
                      Quantity must be larger than 0
                      </small>
            
                    </div>
                  </div>
                  
                  

                   <div class="mb-3 row btn-row">
                     <button class="btn btn-primary col-md-4 col-sm-3">Buy</button>
                   </div>

                    </form>

                    <div class="mb-3 row btn-row">
                      <button (click)="deleteCartItem(item._id || '')" class="btn btn-danger col-md-4 col-sm-3">Remove From Cart</button>
                    </div>

                </div>
              </div>
            </div>
          </div>

          

    </div>
    

    <div class="text-light empty" *ngIf="cartItems.length === 0">
      <h2>Your Cart Is Empty</h2>
    </div>

</div>
